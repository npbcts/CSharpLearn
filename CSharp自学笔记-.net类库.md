## C# 自我初学笔记 第N单元  调用.NET类库

来源于: [Learn C# 初级自学教程](https://learn.microsoft.com/zh-cn/training/modules/csharp-call-methods/2-dotnet-class-library),微软推出的初学者教程整理。


### 什么是 .NET 类库？

除了 C# 语言本身，还需要其他项才能构建应用程序。这些被C#调用的项，构成了类库。主要用于以下两个方面：
- 程序底层: .NET 运行时，用于在最终用户的计算机上执行代码时托管并管理代码
- 已写通用功能： 可依赖于可在应用程序中使用的称为 .NET 类库的功能集合

.Net 类库是包含成千上万个方法的数以千计的类的集合。 这些方法由 Microsoft 创建，并可在应用程序中使用。

类只是一种用于包含方法的容器。 开发者通常将相关方法保留在一个类中。 例如，可从命令行窗口发送或接收信息的任何方法都会被收集到 .NET 类库的 System.Console 类中。

### 主要类库分类：

- 包含类和方法的一个较大子集创建动态 Web 应用程序。 
- 还存在好几个系列的类，使你能够构建本机桌面应用程序。 
- 可使用另一个类和方法的子集访问数据库。
- 还有其他一些类，其方法本质上更适用于常规用途。 
- 甚至数据类型也是 .NET 类库的一部分,为简化我们的工作，C# 掩盖了我们使用的数据类型的真实标识。

换言之，其实用工具跨不同的框架。 如果希望读取或写入文件、执行三角函数或微积分操作、进行调用以从 Internet 中检索数据，无论是要构建 Web、桌面、移动还是要构建云应用程序，都可使用这些类及其方法。

### 命名空间 -> 类库的名字

 类被组织成不同的命名空间，以防发生命名冲突。可将命名空间视为类型的“姓氏”。 类包含实现类型的代码。

### 查找类库  

.NET类库如此庞大，以至于任何人都不了解所有部分，即使是在 Microsoft 工作的人员也不了解。那么，如何找到应用程序所需的内容呢？  

- 根据所处理的项目，你会更熟悉 .NET 类库的某些部分
- 搜索引擎查找博客文章、文章或论坛
- 阅读 Microsoft 关于特定方法的文档

在进入不熟悉的领域时，所有软件开发者都遵循类似的过程。 发现的过程虽然充满挑战，但却是令人愉快的。

### 调用 .NET 类库中的方法

```c#
// System库中的 Random 类和 Console 类的方法
Random dice = new Random();  // Random类对象的实例化
int roll = dice.Next(1,7);  // 调用 dice 对象的 Next() 方法，传入两个参数：随机数字的最小值和最大值。
Console.WriteLine(roll);  // 打印roll
```
输出1~7之间的随机数。

### 有状态方法与无状态方法
两者之间的区别:
- 有状态方法: 需要将某个类实例化，针对实例化后的类执行方法。因此这个类可以有多个实例执行相同的方法。原因在于，有状态方法依赖存储在内存中的值,实例化后的类包含这个值。  
    例如`Random`类，依赖内存中的参数(本例为1-7)，去创建随机数。需要创建`Random`实例存储参数值。
- 无状态方法：无需将类实例化。原因在于，执行特定的功能，不需要包含或以来内存中的值。  
    例如`Console.Write()`方法，只执行打印动作，无依赖值。

### 如何确定是否需要创建实例

- 一种了解方法调用方式的方法是参考文档。 可通过其中的一些示例了解是必须从对象实例调用方法，还是必须直接从类调用方法。
- 或者，也可以尝试直接从类本身访问该方法。 可能出现的最糟糕的情况是遇到编译错误。

```c#
int result = Random.Next();
```
将显示一条红色波浪线，指示发生编译错误。 将**鼠标游标悬停在红色波浪线上**，会出现一个弹出窗口，其中显示以下消息：
```
(1,14): error CS0120: An object reference is required for the non-static field, method, or property 'Random.Next()'
```
即在编译器中测试看是否正确，编译器会针对输入情况进行提示。
