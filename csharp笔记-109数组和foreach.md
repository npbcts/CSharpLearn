## C# 自我初学笔记 第九章  数组和foreach语句

来源于: [Learn C# 初级自学教程](https://learn.microsoft.com/zh-cn/training/modules/csharp-arrays/1-introduction),微软推出的初学者教程整理。


### 数组

C# 数组可以将值的序列存储在单个数据结构中。 换而言之，数组是一个可以保存多个值的变量。 一旦有了一个可存储所有值的变量，就可以对值进行排序、颠倒值的顺序、遍历每个值并逐个检查每个值，等等。

数组是可通过单个变量名称进行访问的一系列单个数据元素。 使用从零开始的数字索引访问数组中的每个元素。 如你所见，数组能够收集相似的数据（这些数据在单个数据结构中共享共同用途或特征），以便于进行处理。

#### 声明数组

数组是一种特殊类型的变量，可以**保存同一数据类型**的多个值。 因为必须同时指定数组的数据类型和大小，所以声明语法略有不同。

声明保存三个元素的字符串数组：

```c#
string[] orderIDs = new string[3];
```
语句从左至右的解释：  
- `string`: 数组内保存数据类型的格式
- `[]`: 只是告知编译器，要声明的变量(此处为orderIDs)将是数组
- `orderIDs`：数组变量名
- `new`: 在可容纳三个字符串值的计算机内存中创建数组的新实例
- `string`: *创建实例使用的类?*
- `[3]`:  包含数组要保存的元素总数

虽然此示例只声明一个字符串数组，但可以创建每个数据类型的数组，其中包括基元（如 int 和 bool）以及更复杂的数据类型（如类）。

#### 为数组赋值

上一部分，我们已声明了一个字符串数组，但该数组的每个元素都为空。 若要访问数组的元素，请使用方括号`[]`内从零开始的数字索引。  
像常规变量一样，使用 = 分配值进行赋值。
```c#
orderIDs[0] = 'A001'
```
数组实际上是可变容器类型(源于python,不知是否准确)，因此针对同一个索引位置再次赋值，就更新了此位置的值。


#### 检索数组的值
使用元素的索引来检索元素的值。
```c#
id0 = orderIds[0]
```
注意，检索数组的值不能超出索引界限。超出界限的检索数组编译器会报错。

#### 初始化数组
与初始化变量类似，可以声明并为数组赋值，即初始化数组。初始化数组使用`{}`.
初始化数组语句如下:
```c#
string[] orderIDs = { "A123", "B456", "C789" };
```
#### 获取数组的长度
使用`数组.Length`即`.Length`属性获取数组的长度。

```c#
Console.WriteLine($"There are {orderIDs.Length} fraudulent orders.");
```
### foreach语句
foreach 语句遍历数组中的每个元素，在其声明下运行代码块，并将临时变量中的值替换为当前循环表示的数组值。
一个foreach伪代码如下:
```c#
foreach 循环体
    代码块
```
一个简单的foreach语句:
```c#
string[] names = { "Bob", "Conrad", "Grant" };
foreach (string name in names)
{
    Console.WriteLine(name);
}
```
- 在循环体 `(string name in names)`中，声明了一个临时变量`name`,每循环一次就为变量赋值数组`names`中的一个值。这个赋值顺序是按照数组数据的顺序进行的，也就是索引顺序。
- 每循环一次就执行一次代码块中的代码。

在循环外部创建变量记录index，并在循环代码块内部增加序数，就可以获取数组的索引。
下面是获取索引的例子:

```c#
int[] inventory = { 200, 450, 700, 175, 250 };
int sum = 0;
int bin = 0;
foreach (int items in inventory)
{
    sum += items;
    bin++;
    Console.WriteLine($"Bin {bin} = {items} items (Running total: {sum})");
}
Console.WriteLine($"We have {sum} items in inventory.");
```
其中, `bin++`是 `bin = bin +1`的简写，`++`是增量运算符。

### 一个使用数组和foreach循环的例子
我们着手编写了代码来存储可能是虚假订单的订单 ID。 我们希望尽早发现虚假订单，并标记这些订单以进行深入分析。

我们团队发现了一种模式。 以字母“B”开头的订单，其涉及欺诈的概率是正常订单的 25 倍。 我们将编写新代码，用于输出新订单的订单 ID（这些订单 ID 以字母“B”开头）。 我们的反欺诈团队将使用此方法进行进一步调查。

模拟的订单号码如下:
```
B123
C234
A345
C15
B177
G3003
C235
B179
```
要求打印出可以订单。
一种可能的解决方案:
```c#
string[] ordersIds = {
    "B123",
    "C234",
    "A345",
    "C15",
    "B177",
    "G3003",
    "C235",
    "B179",
    };

foreach (string orderId in ordersIds)
{
    if (orderId.StartsWith("B"))
    {
        Console.WriteLine($"可疑订单号为: {orderId}");
    }
}
```

### 其他知识扩展
- 判断字符串的开始值
若要确定某元素是否以字母“B”开头，请使用 `String.StartsWith()` 方法。

- 多行注释

使用 `/* ... */` 来进行多行注释。


(End)
